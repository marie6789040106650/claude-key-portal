# ============================================
# Claude Key Portal - 环境变量配置示例
# ============================================

# --------------------------------------------
# 数据库配置 (PostgreSQL)
# --------------------------------------------

# 数据库连接URL
# 格式: postgresql://USER:PASSWORD@HOST:PORT/DATABASE?参数
#
# Serverless环境优化参数 (Vercel/AWS Lambda):
# - connection_limit=1: 限制每个实例的最大连接数
# - pool_timeout=0: 禁用连接池超时（立即获取连接或失败）
# - connect_timeout=10: 连接超时时间（秒）
# - schema=public: 默认schema
#
# 示例:
# DATABASE_URL="postgresql://user:password@localhost:5432/claude_key_portal?connection_limit=1&pool_timeout=0&connect_timeout=10"
#
# Vercel Postgres (推荐):
# DATABASE_URL="postgres://username:password@host-region.postgres.vercel-storage.com:5432/database?connection_limit=1&pool_timeout=0"
#
# Supabase:
# DATABASE_URL="postgresql://postgres:password@db.xxx.supabase.co:5432/postgres?connection_limit=1&pool_timeout=0"
#
# Railway:
# DATABASE_URL="postgresql://postgres:password@containers-us-west-xxx.railway.app:5432/railway?connection_limit=1&pool_timeout=0"
DATABASE_URL="postgresql://localhost:5432/claude_key_portal?connection_limit=1&pool_timeout=0"

# --------------------------------------------
# 认证与安全
# --------------------------------------------

# JWT密钥（生产环境必须使用强随机字符串）
# 生成方法: openssl rand -base64 32
JWT_SECRET="your-super-secret-jwt-key-change-this-in-production"

# JWT Token过期时间
JWT_ACCESS_TOKEN_EXPIRY="24h"   # 访问Token：24小时
JWT_REFRESH_TOKEN_EXPIRY="7d"   # 刷新Token：7天

# --------------------------------------------
# CRS (Claude Relay Service) 配置
# --------------------------------------------

# CRS 部署地址
CRS_BASE_URL="https://claude.just-play.fun"

# CRS Admin 账号（用于管理密钥）
CRS_ADMIN_USERNAME="cr_admin_4ce18cd2"
CRS_ADMIN_PASSWORD="HCTBMoiK3PZD0eDC"

# --------------------------------------------
# Redis缓存配置 (可选)
# --------------------------------------------

# Redis连接URL
# 本地开发:
# REDIS_URL="redis://localhost:6379"
#
# Upstash Redis (Vercel推荐):
# REDIS_URL="redis://:password@region.upstash.io:port"
#
# Redis Labs:
# REDIS_URL="redis://default:password@host:port"
REDIS_URL="redis://localhost:6379"

# --------------------------------------------
# 邮件服务配置 (可选 - 用于通知)
# --------------------------------------------

# SMTP配置
SMTP_HOST="smtp.gmail.com"
SMTP_PORT="587"
SMTP_USER="your-email@gmail.com"
SMTP_PASSWORD="your-app-specific-password"
SMTP_FROM="Claude Key Portal <noreply@example.com>"

# --------------------------------------------
# 应用配置
# --------------------------------------------

# 运行环境
NODE_ENV="development"  # development | production | test

# 应用URL
NEXT_PUBLIC_APP_URL="http://localhost:3000"

# API基础路径
NEXT_PUBLIC_API_BASE_URL="http://localhost:3000/api"

# --------------------------------------------
# 监控与日志 (可选)
# --------------------------------------------

# Sentry DSN (错误追踪)
# SENTRY_DSN="https://xxx@xxx.ingest.sentry.io/xxx"

# 日志级别
LOG_LEVEL="info"  # debug | info | warn | error

# --------------------------------------------
# 特性开关 (可选)
# --------------------------------------------

# 启用注册功能
ENABLE_REGISTRATION="true"

# 启用邮件通知
ENABLE_EMAIL_NOTIFICATIONS="false"

# 启用Redis缓存
ENABLE_REDIS_CACHE="false"

# ============================================
# Vercel 部署注意事项
# ============================================
#
# 1. 在 Vercel Dashboard 中设置环境变量
# 2. DATABASE_URL 必须包含连接池参数
# 3. JWT_SECRET 必须在生产环境中修改
# 4. CRS凭据需要与实际部署的CRS匹配
#
# 详细文档: docs/DEPLOYMENT_PLATFORM_ANALYSIS.md
# ============================================
